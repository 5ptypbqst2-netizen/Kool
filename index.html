<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Virtual Betting</title>
<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0b3d1f;
  color:#fff;
  text-align:center;
}
.top{
  display:flex;
  justify-content:space-between;
  padding:10px 20px;
}
.balance{font-size:16px}
.round{font-size:16px}

.arena{
  width:360px;
  height:360px;
  margin:10px auto;
  position:relative;
}
.icon{
  position:absolute;
  width:60px;
  height:60px;
  border-radius:50%;
  background:#1abc6c;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:bold;
  cursor:pointer;
}
.icon.selected{
  outline:3px solid gold;
}
.timer{
  position:absolute;
  bottom:150px;
  left:50%;
  transform:translateX(-50%);
  font-size:32px;
}

.resultBox{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.8);
  align-items:center;
  justify-content:center;
}
.result{
  background:#123;
  padding:20px;
  border-radius:12px;
}

.bets{
  display:flex;
  justify-content:center;
  gap:10px;
  margin:10px;
}
.bets button{
  padding:8px 14px;
  border:none;
  border-radius:8px;
  font-weight:bold;
}

.top1{top:10px;left:90px}
.top2{top:10px;left:210px}
.mid1{top:100px;left:20px}
.mid2{top:100px;right:20px}
.low1{bottom:100px;left:20px}
.low2{bottom:100px;right:20px}
.bot1{bottom:10px;left:90px}
.bot2{bottom:10px;left:210px}
</style>
</head>

<body>

<div class="top">
  <div class="round">الجولة: <span id="round">1</span></div>
  <div class="balance">الرصيد: <span id="balance">1000000</span></div>
</div>

<div class="arena">
  <div class="icon top1" data-m="100">x100</div>
  <div class="icon top2" data-m="100">x100</div>
  <div class="icon mid1" data-m="20">x20</div>
  <div class="icon mid2" data-m="20">x20</div>
  <div class="icon low1" data-m="8">x8</div>
  <div class="icon low2" data-m="8">x8</div>
  <div class="icon bot1" data-m="3">x3</div>
  <div class="icon bot2" data-m="3">x3</div>

  <div class="timer" id="timer">20</div>
</div>

<div class="bets">
  <button onclick="setBet(50)">50</button>
  <button onclick="setBet(500)">500</button>
  <button onclick="setBet(5000)">5000</button>
  <button onclick="setBet(50000)">50000</button>
</div>

<div class="resultBox" id="resultBox">
  <div class="result">
    <p>الفائز: <span id="winner"></span></p>
    <p>إجمالي الرهان: <span id="totalBet"></span></p>
    <p>الربح: <span id="win"></span></p>
  </div>
</div>

<script>
let balance = 1000000;
let currentBet = 0;
let time = 20;
let round = 1;
let bets = [];
const icons = document.querySelectorAll(".icon");

function setBet(v){ currentBet = v; }

icons.forEach(icon=>{
  icon.onclick=()=>{
    if(currentBet<=0 || balance<currentBet) return;
    balance -= currentBet;
    document.getElementById("balance").textContent = balance;
    bets.push({icon, amount:currentBet});
    icon.classList.add("selected");
  }
});

function endRound(){
  const winner = icons[Math.floor(Math.random()*icons.length)];
  let totalBet = 0;
  let win = 0;

  bets.forEach(b=>{
    totalBet += b.amount;
    if(b.icon === winner){
      win += b.amount * b.icon.dataset.m;
    }
  });

  balance += win;
  document.getElementById("balance").textContent = balance;

  document.getElementById("winner").textContent = winner.textContent;
  document.getElementById("totalBet").textContent = totalBet;
  document.getElementById("win").textContent = win;

  document.getElementById("resultBox").style.display="flex";

  setTimeout(()=>{
    document.getElementById("resultBox").style.display="none";
    icons.forEach(i=>i.classList.remove("selected"));
    bets=[];
    time=20;
    round++;
    document.getElementById("round").textContent=round;
  },3000);
}

setInterval(()=>{
  time--;
  document.getElementById("timer").textContent=time;
  if(time<=0) endRound();
},1000);
</script>

</body>
</html>
